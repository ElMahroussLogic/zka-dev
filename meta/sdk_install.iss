; Script generated by the Inno Setup Script Wizard.
; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

#define ZkaAppName "ZKA SDK"
#define ZkaAppVersion "1.00"
#define ZkaAppPublisher "ZKA Software B.V"
#define ZkaAppURL "https://www.zka-software.com/"

[Setup]
; NOTE: The value of AppId uniquely identifies this application. Do not use the same AppId value in installers for other applications.
; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
AppId={{A698D5D3-451C-440E-85F0-E0FC0859CE90}
AppName={#ZkaAppName}
AppVersion={#ZkaAppVersion}
;AppVerName={#ZkaAppName} {#ZkaAppVersion}
AppPublisher={#ZkaAppPublisher}
AppPublisherURL={#ZkaAppURL}
AppSupportURL={#ZkaAppURL}
AppUpdatesURL={#ZkaAppURL}
DefaultDirName={autopf}\{#ZkaAppName}
DefaultGroupName=ZKA OS Headers
LicenseFile=.\zka_licensing.rtf
; Remove the following line to run in administrative install mode (install for all users.)
PrivilegesRequired=lowest
OutputBaseFilename=zka-sdk

Compression=lzma
SolidCompression=yes
WizardStyle=classic
SetupIconFile=.\setup.ico

[Languages]
Name: "english"; MessagesFile: "compiler:Default.isl"

[Files]
Source: "..\dev\sci\*.hxx"; DestDir: "{app}\sci"; Flags: ignoreversion
Source: "..\dev\crt\*.hxx"; DestDir: "{app}\crt"; Flags: ignoreversion
Source: "..\dev\comm\*.idl"; DestDir: "{app}\comm"; Flags: ignoreversion
Source: "..\..\cl-dev\*.dll"; DestDir: "{app}\bin"; Flags: ignoreversion
Source: "..\..\cl-dev\tools\*.exe"; DestDir: "{app}\bin"; Flags: ignoreversion

; NOTE: Don't use "Flags: ignoreversion" on any shared system files

[Icons]
Name: "{userdesktop}\ZKA Uninstaller."; Filename: "{app}\unins000.exe"; \
    IconFilename: "shell32.dll"; IconIndex: 161

[Icons]
Name: "{userdesktop}\ZKA Linker (CLI)"; Filename: "{app}\bin\link.exe"; \
    IconFilename: "shell32.dll"; IconIndex: 12

Name: "{userdesktop}\ZKA C++ Compiler (CLI)"; Filename: "{app}\bin\cl.exe"; \
    IconFilename: "shell32.dll"; IconIndex: 12

Name: "{userdesktop}\ZKA Assembler (CLI)"; Filename: "{app}\bin\asm.exe"; \
    IconFilename: "shell32.dll"; IconIndex: 12
[Files]
Source: ".\background.bmp"; Flags: dontcopy

[Setup]
WindowVisible=yes

[Code]

procedure InitializeWizard();
var
  BackgroundImage: TBitmapImage;
begin
  BackgroundImage := TBitmapImage.Create(MainForm);
  BackgroundImage.Parent := MainForm;
  BackgroundImage.SetBounds(0, 0, MainForm.ClientWidth, MainForm.ClientHeight);
  BackgroundImage.Stretch := True;
  ExtractTemporaryFile('background.bmp');
  BackgroundImage.Bitmap.LoadFromFile(ExpandConstant('{tmp}\background.bmp'));
end;
