;; FILE: EBS.asm
;; PURPOSE: EXPLICIT BOOT SECTOR OF HPFS.
;; AUTHOR: AMLAL EL MAHROUSS
;; THIS IS PART OF THE HPFS FOR AMD64 FILESYSTEM PACKAGE.

[bits 64]

;; WRITE THIS A BLOB TO THEN DUMP INTO DISK.

HPFS_EBS_HEADER:
    db "   HPFS", 0 ;; MAGIC NUMBER OF FILESYSTEM
    db 1 ;; VERSION
    dw 0 ;; PARTITION TYPE
    dw 0 ;; CHECKSUM OF PARTITION
    dw 0 ;; IS IT LOCKED? (DISK ENCRYPTION ON?)
    dq 0 ;; SECTOR COUNT
    dw 512 ;; SECTOR SZ
    dq 0 ;; KERNEL FILE RECORD LBA
    dq 0 ;; KERNEL FILE RECORD SIZE
;; READ LAST, WHEN KERNEL LBA IS READ.
HPFS_OS_JUMP_FIELD:
    nop
    nop
    jmp 0x4000000 ;; OS JUMP FIELD, OS SHOULD BE AT THAT LOCATION