;; FILE: EBS.asm
;; PURPOSE: EXPLICIT BOOT SECTOR STRUCTURE (HPFS RELATED).
;; AUTHOR: AMLAL EL MAHROUSS

[bits 64]

;; DUMP THIS BLOB TO DISK, WHEN FORMATTING THE SSD.

HPFS_EBS_HEADER:
    db "   HPFS" ;; MAGIC NUMBER OF FILESYSTEM
    dw 8 ;; MAGIC NUMBER LENGTH.
    dq 0 ;; RESERVED 4
    dw 1 ;; VERSION
    dw 0 ;; PARTITION TYPE
    dq 0 ;; RESERVED 3
    dw 0 ;; DISK TYPE (INVALID = 0, CDROM = 1, SSD = 2, USB = 3)
    dw 0 ;; CHECKSUM OF PARTITION
    dw 0 ;; IS IT LOCKED? (DISK ENCRYPTION ON?)
    dq 0 ;; SECTOR COUNT
    dq 0 ;; RESERVED 2
    dq 512 ;; SECTOR SZ
    dq 0 ;; DISK SIZE
    dq 0 ;; RESERVED 1 SLOT
    dq 1 ;; LOCKER ON?
    dq 1 ;; PARTITION MAP TYPE (GPT, MBR, EPM)
    dq 16 ;; MASTER FILE TABLE
    dq 80 ;; MASTER TRACE TABLE
    dq 144 ;; MASTER DIRECTORY TABLE
    dw 0xFFFF ;; END OF HEADER WORD
